# LLMChatBackend

---

基于Python Flask框架和LangChain开发的智能聊天应用，支持文本、文件和图片交互，具备记忆功能和多种工具调用能力。

## 功能特性

### 🗣️ 多模态交互
- **纯文本对话**：直接与LLM进行智能对话
- **文件处理**：支持上传文档文件（PDF、Word、TXT等），自动提取文本并生成摘要
- **图片理解**：支持图片上传，提取文字信息并生成详细描述
- **智能记忆**：基于Redis的对话记忆，保持会话连贯性

### 🔧 智能工具集成
- **向量数据库查询**：基于上传文档的智能检索
- **联网搜索**：实时获取最新信息
- **URL访问**：直接获取网页内容
- **动态工具分配**：根据上下文智能选择可用工具

### ⚡ 技术特色
- **会话记忆**：Redis存储，3600秒自动过期
- **可配置系统提示**：支持用户自定义角色设定
- **模块化设计**：易于扩展和维护
- **文本转语音**（开发中）：基于DashScope的TTS服务

### 文件处理流程
1. **文本提取**：从PDF、Word等文件中提取纯文本
2. **文档理解**：使用LLM生成长文档摘要
3. **文本分片**：将文档分割为适合向量化的片段
4. **向量存储**：将文本片段和摘要存入向量数据库

### 图片处理流程
1. **文字提取**：使用OCR技术提取图片中的文字
2. **视觉描述**：使用多模态LLM生成图片详细描述
3. **上下文整合**：将提取的文字和描述添加到对话上下文

## 开发中的功能

### 文本转语音 (TTS)
- **服务商**：DashScope阿里云
- **状态**：开发中，尚未投入使用
- **计划功能**：将AI回复转换为语音输出

## 配置说明

### 记忆配置
- **存储**：Redis
- **键格式**：`chat_session:{session_id}`
- **过期时间**：3600秒（1小时）
- **数据结构**：存储对话历史和上下文

### 工具配置
- **向量数据库**：支持多种向量数据库后端
- **联网搜索**：需要SERPAPI或其他搜索API密钥
- **URL访问**：内置网页内容提取功能
